function [y_new,weights] = theta_weighted(X,y,alpha,tau)    m = length(X);  y_new = ones(m,1);    for i = 1:m     %defined weights     weights = (exp(-(X(:,2)-X(i,2)).^2/(2*(tau^2))));    %generated diagonal matrix of weights for linear algebra application    W = diag(weights);    %find the theta using normal equations     theta = (inv(X'*W*X)*(X'*W*y));    % generated new value of y according to hypothesis    y_new(i) = X(i,:)*theta;  end  end